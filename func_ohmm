#!/usr/bin/env bash
# yet another wrapper for sending mplayer what to play
function ohmm_play {
	if [ -z "$1" ]; then
#		should filter just music extensions I think are applicable
		for f in `find . \( ! -iname ".*" \) -type f` -iregex $FORMATS; do
#			I have not decided what I want to do here
			if [ -d $f ]; then
				ODIR=$PWD
				cd $f
				cd $ODIR	
			else
#				spaces suck, I am going to fix them for you
				cp -n $f $(echo $f | tr ' ' '_') &>/dev/null && rm $f
				echo "$PWD/$(echo $f | tr ' ' '_')" >> $QUEUE 
			fi
		done
	else
		if [ -e "$1" ]; then
			if [ -d "$1" ]; then
				ODIR=$PWD
				cd "$1"
				ohmm_play "" ""
				cd $ODIR
			else
				echo "$PWD/$1" >> $QUEUE
			fi
		else
			echo "$1 does not exist"
		fi
	fi
}

# execute the shell command with the line tokenized into array
function shell_cmd {
	LINE_CMD=""
	for s in ${CMD[@]}; do
		LINE_CMD="$LINE_CMD $s"
	done
	$LINE_CMD
}

# deal with mtp library
function mtp {
	echo "not implemented"
}

# deal with parsing mplayer output to find my position in QUEUE
function get_position {
	echo "not implemented"
}
